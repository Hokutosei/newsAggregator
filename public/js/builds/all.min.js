!function(){"use strict";app=angular.module("newsAggregator",["ngTouch","ngCookies","angulartics","angulartics.google.analytics","ngResource","ngRoute"]);app.config(function(e,n){e.when("/",{templateUrl:"js/index_page/index.html",controller:"MainCtrl"}).when("/:q",{templateUrl:"js/index_page/index.html",controller:"MainCtrl"}).when("/admin",{templateUrl:"js/pages/admin/templates/admin.html",controller:"AdminController"}).when("/news/:id",{templateUrl:"js/news_page/template/news.html",controller:"NewsPageCtrl"}).otherwise({redirectTo:"/"}),n.html5Mode({enabled:!0,requireBase:!0})})}();
!function(){"use strict";var e=function(e){console.log(e)};app.controller("HeaderCtrl",["$scope",function(e){e.project_name="learnJap"}]),app.controller("MainCtrl",function(n,t,o,c,i,a,s,r,d,l,w){c.pageTrack("/"),c.eventTrack("index",{category:"index_main",label:"index_label"}),n.news_content_type="latest_news",a.content_type=n.news_content_type,n.main_index_news=[];var u=function(){l.kedoyoId="testid",e(l.kedoyoId),1==_.has(r,"q")?o.fetchCategoryNews(r.q).success(function(e){n.main_index_news=e}):o.getNewsContent(a.content_type,function(e,t){n.main_index_news=e})};n.news_content=function(e){a.content_type=e,c.eventTrack("index",{category:"index_main",label:e}),"/"!=i.path()?window.location.href="/":o.getNewsContent(a.content_type,function(e,t){n.news_content_type=a.content_type,n.main_index_news=e})},n.feed_more=function(e){c.eventTrack("feed_more",{category:"system_func",label:"feed_more_data"}),o.feedMoreNews(n.news_content_type,e,function(e,t){for(var o=0;o<e.length;o++)n.main_index_news.push(e[o])})},a.$on("update_main_index_news",function(e,t){n.main_index_news=t}),a.$on("empty_main_index_news",function(){n.main_index_news=[]}),n.ga_event=function(e){o.incrementNewsItemScore(e),c.eventTrack("news_item_"+e.title,{category:"news_clicks",label:"news_item_clicked"})},n.decodeURL=function(e){return decodeURIComponent(e)},n.timeToLocal=function(e){return new Date(1e3*e)},n.absURL=function(e,n){var t=i.protocol(),o=(i.port(),t+"://"+location.host+"/news/"+e);return 1==n?o:o+"#disqus_thread"},u()})}();
!function(){"use strict";app=angular.module("newsAggregator",["ngTouch","ngCookies","angulartics","angulartics.google.analytics","ngResource","ngRoute"]),app.config(function(e,t){e.when("/",{templateUrl:"js/index_page/index.html",controller:"MainCtrl"}).when("/:q",{templateUrl:"js/index_page/index.html",controller:"MainCtrl"}).when("/admin",{templateUrl:"js/pages/admin/templates/admin.html",controller:"AdminController"}).when("/news/:id",{templateUrl:"js/news_page/template/news.html",controller:"NewsPageCtrl"}).otherwise({redirectTo:"/"}),t.html5Mode({enabled:!0,requireBase:!0})})}(),!function(){"use strict";var e=function(e){console.log(e)};app.controller("HeaderCtrl",["$scope",function(e){e.project_name="learnJap"}]),app.controller("MainCtrl",function(t,n,o,c,i,r,a,s,l,u,d){c.pageTrack("/"),c.eventTrack("index",{category:"index_main",label:"index_label"}),t.news_content_type="latest_news",r.content_type=t.news_content_type,t.main_index_news=[];var f=function(){u.kedoyoId="testid",e(u.kedoyoId),1==_.has(s,"q")?o.fetchCategoryNews(s.q).success(function(e){t.main_index_news=e}):o.getNewsContent(r.content_type,function(e,n){t.main_index_news=e})};t.news_content=function(e){r.content_type=e,c.eventTrack("index",{category:"index_main",label:e}),"/"!=i.path()?window.location.href="/":o.getNewsContent(r.content_type,function(e,n){t.news_content_type=r.content_type,t.main_index_news=e})},t.feed_more=function(e){c.eventTrack("feed_more",{category:"system_func",label:"feed_more_data"}),o.feedMoreNews(t.news_content_type,e,function(e,n){for(var o=0;o<e.length;o++)t.main_index_news.push(e[o])})},r.$on("update_main_index_news",function(e,n){t.main_index_news=n}),r.$on("empty_main_index_news",function(){t.main_index_news=[]}),t.ga_event=function(e){o.incrementNewsItemScore(e),c.eventTrack("news_item_"+e.title,{category:"news_clicks",label:"news_item_clicked"})},t.decodeURL=function(e){return decodeURIComponent(e)},t.timeToLocal=function(e){return new Date(1e3*e)},t.absURL=function(e,t){var n=i.protocol(),o=(i.port(),n+"://"+location.host+"/news/"+e);return 1==t?o:o+"#disqus_thread"},f()})}(),!function(){"use strict";app.service("newsPageService",function(e){return{getNewsItem:function(t){return e.get("/news_item",{params:{news_id:t}})}}})}(),!function(){"use strict";app.controller("NewsPageCtrl",function(e,t,n,o){t.getNewsItem(e.id).then(function(e,t){n.news_item=e.data,o.eventTrack("news_item",{category:"news_item",label:n.news_item.title})}),n.absURL=function(e,t){var n=$location.protocol(),o=($location.port(),n+"://"+location.host+"/news/"+e);return 1==t?o:o+"#disqus_thread"},n.decodeURL=function(e){return decodeURIComponent(e)}})}(),!function(){"use strict";var e=function(e){console.log(e)};app.factory("httpService",function(t){return{getIndexNews:function(e){t.get("/get_index_news").success(function(t,n){e(t,n)})},getNewsContent:function(e,n){t.get("/"+e).success(function(e,t){n(e,t)})},feedMoreNews:function(e,n,o){t({method:"POST",url:"/feed_more",data:{ContentType:e,Skip:n}}).success(function(e,t){o(e,t)})},incrementNewsItemScore:function(n){e(n),t({method:"POST",url:"/increment_news",data:{Id:n._id}}).success(function(t,n){e(n)})},fetchHeaderCategories:function(e){t.get("/header_categories").success(function(t,n){e(t)})},fetchCategoryNews:function(e){return t({url:"/fetch_category_news",method:"GET",params:{initial:e}})}}})}(),!function(){"use strict";app.factory("userLocation",function(){return{getLocation:function(){console.log(navigator.geolocation),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){console.log(e)})}}})}(),!function(){"use strict";app.factory("userSession",function(e){return{userSessionId:function(){e.put("tests","ktest"),console.log(e);var t=e.kedoyoId;return t}}})}(),!function(){"use strict";app.controller("AdminController",function(e){$("#menu-toggle").click(function(e){e.preventDefault(),$("#wrapper").toggleClass("toggled")})})}(),!function(){"use strict";app.directive("categoryMenu",function(e,t,n){return{restrict:"E",templateUrl:"js/shared/templates/category_menu.html",controller:function(o){$(".button-collapse").sideNav({closeOnClick:!0}),o.category_lists=[],o.categories=function(){e.fetchHeaderCategories(function(e){o.category_lists=_.map(e,function(e){return e})})},o.category_get=function(o){var c=n.path();return""==c.match("/(.*)$")[1]||c.match("/news")?(window.location.href="/"+o.initial,!1):(t.$emit("empty_main_index_news"),t.$emit("update_current_news_cat",o),t.current_news_cat_name=o,void e.fetchCategoryNews(o.initial).success(function(e){t.$emit("update_main_index_news",e),n.path("/"+o.initial)}))}}}})}(),!function(){"use strict";app.directive("loadSpinner",function(){return{restrict:"E",templateUrl:"js/shared/templates/load_spinner.html",scope:{data:"="},link:function(e){}}})}(),!function(){"use strict";app.directive("overallFooter",function(e){return{restrict:"E",templateUrl:"js/shared/templates/overallfooter.html",controller:function(t){t.luxiar_co=function(){e.eventTrack("luxiar_homepage",{category:"luxiar_co",label:"footer link"}),window.open("http://www.luxiar.com/","_blank")}}}})}(),!function(){"use strict";app.directive("overallHeader",function(e,t,n,o){return{restrict:"E",templateUrl:"js/shared/templates/overallheader.html",controller:function(c){c.current_news_cat=e.current_news_cat_name||"",e.$on("update_current_news_cat",function(e,t){c.current_news_cat=t}),c.news_content=function(i){e.content_type=i,t.eventTrack("index",{category:"index_main",label:i}),"/"!=o.path()?window.location.href="/":n.getNewsContent(e.content_type,function(t,n){c.news_content_type=e.content_type,c.main_index_news=t})},c.category_get=function(t){n.fetchCategoryNews(t).success(function(t){e.$emit("update_main_index_news",t)})}}}})}();
!function(){"use strict";app.service("newsPageService",function(e){return{getNewsItem:function(n){return e.get("/news_item",{params:{news_id:n}})}}})}();
!function(){"use strict";app.controller("NewsPageCtrl",function(t,e,n,o){e.getNewsItem(t.id).then(function(t,e){n.news_item=t.data,o.eventTrack("news_item",{category:"news_item",label:n.news_item.title})}),n.absURL=function(t,e){var n=$location.protocol(),o=($location.port(),n+"://"+location.host+"/news/"+t);return 1==e?o:o+"#disqus_thread"},n.decodeURL=function(t){return decodeURIComponent(t)}})}();
!function(){"use strict";var e=function(e){console.log(e)};app.factory("httpService",function(t){return{getIndexNews:function(e){t.get("/get_index_news").success(function(t,n){e(t,n)})},getNewsContent:function(e,n){t.get("/"+e).success(function(e,t){n(e,t)})},feedMoreNews:function(e,n,c){t({method:"POST",url:"/feed_more",data:{ContentType:e,Skip:n}}).success(function(e,t){c(e,t)})},incrementNewsItemScore:function(n){e(n),t({method:"POST",url:"/increment_news",data:{Id:n._id}}).success(function(t,n){e(n)})},fetchHeaderCategories:function(e){t.get("/header_categories").success(function(t,n){e(t)})},fetchCategoryNews:function(e){return t({url:"/fetch_category_news",method:"GET",params:{initial:e}})}}})}();
!function(){"use strict";app.factory("userLocation",function(){return{getLocation:function(){console.log(navigator.geolocation),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(o){console.log(o)})}}})}();
!function(){"use strict";app.factory("userSession",function(t){return{userSessionId:function(){t.put("tests","ktest"),console.log(t);var s=t.kedoyoId;return s}}})}();
!function(){"use strict";app.controller("AdminController",function(t){$("#menu-toggle").click(function(t){t.preventDefault(),$("#wrapper").toggleClass("toggled")})})}();
!function(){"use strict";app.directive("categoryMenu",function(t,e,n){return{restrict:"E",templateUrl:"js/shared/templates/category_menu.html",controller:function(i){$(".button-collapse").sideNav({closeOnClick:!0}),i.category_lists=[],i.categories=function(){t.fetchHeaderCategories(function(t){i.category_lists=_.map(t,function(t){return t})})},i.category_get=function(i){var a=n.path();return""==a.match("/(.*)$")[1]||a.match("/news")?(window.location.href="/"+i.initial,!1):(e.$emit("empty_main_index_news"),e.$emit("update_current_news_cat",i),e.current_news_cat_name=i,void t.fetchCategoryNews(i.initial).success(function(t){e.$emit("update_main_index_news",t),n.path("/"+i.initial)}))}}}})}();
!function(){"use strict";app.directive("loadSpinner",function(){return{restrict:"E",templateUrl:"js/shared/templates/load_spinner.html",scope:{data:"="},link:function(t){}}})}();
!function(){"use strict";app.directive("overallFooter",function(e){return{restrict:"E",templateUrl:"js/shared/templates/overallfooter.html",controller:function(t){t.luxiar_co=function(){e.eventTrack("luxiar_homepage",{category:"luxiar_co",label:"footer link"}),window.open("http://www.luxiar.com/","_blank")}}}})}();
!function(){"use strict";app.directive("overallHeader",function(e,t,n,c){return{restrict:"E",templateUrl:"js/shared/templates/overallheader.html",controller:function(r){r.current_news_cat=e.current_news_cat_name||"",e.$on("update_current_news_cat",function(e,t){r.current_news_cat=t}),r.news_content=function(a){e.content_type=a,t.eventTrack("index",{category:"index_main",label:a}),"/"!=c.path()?window.location.href="/":n.getNewsContent(e.content_type,function(t,n){r.news_content_type=e.content_type,r.main_index_news=t})},r.category_get=function(t){n.fetchCategoryNews(t).success(function(t){e.$emit("update_main_index_news",t)})}}}})}();